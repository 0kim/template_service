extends ../layout

block content
    h1 Evernote Node.js Express Demo
    hr
    - if(session.error)
        h2 Error
        p
            = session.error
    h2 Authentication
    - if(session.oauthAccessToken)
        - {{ session.oauthAccessToken }}
        a(href='/en/clear') Click here
        |  to
        | start over
        p
        a(href='/en/me') Click here
        |  to
        | show UserStore
        p
        a(href='/en/notebooks') Click here
        |  to
        | show notebook list
    - else
        a(href='/en/oauth') Click here
        |  to
        | connect Evernote
    hr
    - if(session.notebooks)
        h2 Notebooks
        ul
            - console.log("notebook count:" + session.notebooks.length);
            - for (var i = 0; i < session.notebooks.length; ++i)
                li= session.notebooks[i].name
        hr
    h2 Current status
    ul
        li
            b NoteStore URL:
            = session.edamNoteStoreUrl
        li
            b Web API URL prefix:
            = session.edamNoteStoreUrl
    h3 Token Credentials:
    ul
        li
            b token:
            = session.oauthAccessToken
        li
            b secret:
            = session.oauthAccessTokenSecret
        li
            b User ID:
            = session.edamUserId
        li
            b Expires:
            = session.edamExpires

